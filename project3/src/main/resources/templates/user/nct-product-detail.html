<!DOCTYPE html>
                                            <html lang="vi" xmlns:th="http://www.thymeleaf.org">

                                            <head>
                                                <meta charset="UTF-8">
                                                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                                                <title th:text="${nctProduct.nctProductName}">Product Detail</title>
                                                <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
                                                <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
                                                <style>
                                                    * { margin: 0; padding: 0; box-sizing: border-box; }
                                                    body {
                                                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                                                        background-color: #f5f5f5;
                                                    }

                                                    /* Sidebar */
                                                    .sidebar {
                                                        position: fixed;
                                                        left: 0;
                                                        top: 60px;
                                                        width: 250px;
                                                        height: calc(100vh - 60px);
                                                        background-color: #fff;
                                                        border-right: 1px solid #e0e0e0;
                                                        padding: 20px 0;
                                                        z-index: 40;
                                                    }

                                                    .sidebar-item {
                                                        padding: 12px 20px;
                                                        color: #333;
                                                        text-decoration: none;
                                                        display: flex;
                                                        align-items: center;
                                                        gap: 12px;
                                                        font-size: 14px;
                                                        transition: all 0.3s ease;
                                                        border-left: 3px solid transparent;
                                                    }

                                                    .sidebar-item:hover {
                                                        background-color: #f0f0f0;
                                                        color: #ff3333;
                                                        border-left-color: #ff3333;
                                                    }

                                                    .sidebar-item i { font-size: 16px; }

                                                    /* Header */
                                                    header {
                                                        background-color: #fff;
                                                        border-bottom: 1px solid #e0e0e0;
                                                        padding: 12px 20px;
                                                        display: flex;
                                                        align-items: center;
                                                        justify-content: space-between;
                                                        position: sticky;
                                                        top: 0;
                                                        z-index: 50;
                                                        height: 60px;
                                                    }

                                                    .logo {
                                                        font-size: 20px;
                                                        font-weight: bold;
                                                        display: flex;
                                                        align-items: center;
                                                        gap: 2px;
                                                    }

                                                    .logo .red { color: #ff3333; }
                                                    .logo .black { color: #000; }

                                                    /* Main Content */
                                                    .main-content {
                                                        margin-left: 250px;
                                                        padding: 20px;
                                                    }

                                                    /* Product Detail Layout */
                                                    .product-detail-wrapper {
                                                        display: flex;
                                                        gap: 30px;
                                                        background-color: #fff;
                                                        padding: 30px;
                                                        border-radius: 8px;
                                                    }

                                                    .product-images {
                                                        flex: 1;
                                                        display: flex;
                                                        gap: 15px;
                                                    }

                                                    .thumbnail-list {
                                                        display: flex;
                                                        flex-direction: column;
                                                        gap: 10px;
                                                    }

                                                    .thumbnail-item {
                                                        width: 80px;
                                                        height: 80px;
                                                        border: 2px solid #ddd;
                                                        border-radius: 4px;
                                                        overflow: hidden;
                                                        cursor: pointer;
                                                        transition: all 0.3s ease;
                                                    }

                                                    .thumbnail-item:hover,
                                                    .thumbnail-item.active {
                                                        border-color: #ff3333;
                                                    }

                                                    .thumbnail-item img {
                                                        width: 100%;
                                                        height: 100%;
                                                        object-fit: cover;
                                                    }

                                                    .main-image {
                                                        flex: 1;
                                                        display: flex;
                                                        align-items: center;
                                                        justify-content: center;
                                                        background-color: #f9f9f9;
                                                        border: 1px solid #e0e0e0;
                                                        border-radius: 8px;
                                                        overflow: hidden;
                                                    }

                                                    .main-image img {
                                                        max-width: 100%;
                                                        max-height: 500px;
                                                        object-fit: contain;
                                                    }

                                                    .product-info {
                                                        flex: 0 0 35%;
                                                    }

                                                    .product-info h1 {
                                                        font-size: 24px;
                                                        font-weight: bold;
                                                        margin-bottom: 15px;
                                                        color: #000;
                                                    }

                                                    .product-status {
                                                        font-size: 14px;
                                                        color: #666;
                                                        margin-bottom: 15px;
                                                    }

                                                    .product-status span {
                                                        color: #ff9800;
                                                        font-weight: 600;
                                                    }

                                                    .product-price {
                                                        font-size: 32px;
                                                        color: #ff3333;
                                                        font-weight: bold;
                                                        margin: 20px 0;
                                                    }

                                                    .product-original-price {
                                                        font-size: 16px;
                                                        color: #999;
                                                        text-decoration: line-through;
                                                        margin-bottom: 20px;
                                                    }

                                                    .payment-options {
                                                        margin-bottom: 20px;
                                                    }

                                                    .payment-options h6 {
                                                        font-size: 14px;
                                                        font-weight: 600;
                                                        margin-bottom: 10px;
                                                    }

                                                    .payment-btn {
                                                        padding: 8px 16px;
                                                        border: 1px solid #ddd;
                                                        background-color: #fafafa;
                                                        border-radius: 20px;
                                                        cursor: pointer;
                                                        margin-right: 10px;
                                                        font-size: 13px;
                                                        transition: all 0.3s ease;
                                                    }

                                                    .payment-btn:hover {
                                                        border-color: #ff3333;
                                                        color: #ff3333;
                                                    }

                                                    .action-buttons {
                                                        display: flex;
                                                        gap: 10px;
                                                        margin-bottom: 20px;
                                                    }

                                                    .btn-wishlist {
                                                        flex: 0 0 50px;
                                                        padding: 12px;
                                                        border: 1px solid #ddd;
                                                        background-color: #fafafa;
                                                        border-radius: 8px;
                                                        cursor: pointer;
                                                        font-size: 18px;
                                                        transition: all 0.3s ease;
                                                    }

                                                    .btn-wishlist:hover {
                                                        border-color: #ff3333;
                                                        color: #ff3333;
                                                    }

                                                    .btn-preorder {
                                                        flex: 1;
                                                        padding: 14px;
                                                        background-color: #ff3333;
                                                        color: white;
                                                        border: none;
                                                        border-radius: 8px;
                                                        cursor: pointer;
                                                        font-size: 16px;
                                                        font-weight: 600;
                                                        transition: all 0.3s ease;
                                                    }

                                                    .btn-preorder:hover {
                                                        background-color: #e60000;
                                                    }

                                                    .commitments {
                                                        background-color: #f9f9f9;
                                                        padding: 15px;
                                                        border-radius: 8px;
                                                        margin-top: 20px;
                                                    }

                                                    .commitments h6 {
                                                        font-size: 14px;
                                                        margin-bottom: 10px;
                                                    }

                                                    .commitments ul {
                                                        list-style: none;
                                                        padding: 0;
                                                        margin: 0;
                                                    }

                                                    .commitments li {
                                                        font-size: 13px;
                                                        color: #666;
                                                        margin-bottom: 8px;
                                                        display: flex;
                                                        align-items: center;
                                                    }

                                                    .commitments li i {
                                                        margin-right: 10px;
                                                        color: #4caf50;
                                                        width: 16px;
                                                    }

                                                    .related-products {
                                                        margin-top: 40px;
                                                    }

                                                    .related-products h3 {
                                                        font-size: 18px;
                                                        font-weight: bold;
                                                        margin-bottom: 20px;
                                                        padding-bottom: 15px;
                                                        border-bottom: 2px solid #ff3333;
                                                    }

                                                    .product-grid {
                                                        display: grid;
                                                        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                                                        gap: 15px;
                                                    }

                                                    .product-card {
                                                        background: #fff;
                                                        border: 1px solid #e0e0e0;
                                                        border-radius: 8px;
                                                        overflow: hidden;
                                                        transition: all 0.3s ease;
                                                        cursor: pointer;
                                                    }

                                                    .product-card:hover {
                                                        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                                                        transform: translateY(-4px);
                                                        border-color: #ff3333;
                                                    }

                                                    .product-image {
                                                        width: 100%;
                                                        height: 200px;
                                                        background-color: #f0f0f0;
                                                        overflow: hidden;
                                                        display: flex;
                                                        align-items: center;
                                                        justify-content: center;
                                                    }

                                                    .product-image img {
                                                        width: 100%;
                                                        height: 100%;
                                                        object-fit: cover;
                                                        transition: transform 0.3s ease;
                                                    }

                                                    .product-card:hover .product-image img {
                                                        transform: scale(1.1);
                                                    }

                                                    .product-info-card {
                                                        padding: 12px;
                                                    }

                                                    .product-name {
                                                        font-size: 13px;
                                                        font-weight: 600;
                                                        color: #000;
                                                        margin-bottom: 8px;
                                                        display: -webkit-box;
                                                        -webkit-line-clamp: 2;
                                                        -webkit-box-orient: vertical;
                                                        overflow: hidden;
                                                    }

                                                    .product-price-card {
                                                        color: #ff3333;
                                                        font-weight: bold;
                                                        font-size: 14px;
                                                    }

                                                    /* Responsive */
                                                    @media (max-width: 768px) {
                                                        .sidebar {
                                                            width: 200px;
                                                        }

                                                        .main-content {
                                                            margin-left: 200px;
                                                        }

                                                        .product-detail-wrapper {
                                                            flex-direction: column;
                                                        }

                                                        .product-images {
                                                            flex-direction: column;
                                                        }

                                                        .product-info {
                                                            flex: 1;
                                                        }

                                                        .product-grid {
                                                            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                                                        }
                                                    }

                                                    @media (max-width: 480px) {
                                                        .sidebar {
                                                            display: none;
                                                        }

                                                        .main-content {
                                                            margin-left: 0;
                                                        }

                                                        .product-grid {
                                                            grid-template-columns: repeat(2, 1fr);
                                                        }
                                                    }
                                                </style>
                                            </head>

                                            <body>
                                               <div th:replace="~{fragments/nct-header :: header}"></div>

                                               <div th:replace="~{fragments/nct-sidebar :: sidebar(activePage='products')}"></div>

                                               <main class="main-content">
                                                <div class="product-detail-wrapper">
                                                    <!-- Product Images -->
                                                    <div class="product-images">
                                                        <div class="thumbnail-list">
                                                            <div class="thumbnail-item active" onclick="changeMainImage(this)">
                                                                <img th:src="${nctProduct.nctImageUrl}" th:alt="${nctProduct.nctProductName}">
                                                            </div>
                                                        </div>
                                                        <div class="main-image">
                                                            <img id="mainImage" th:src="${nctProduct.nctImageUrl}" th:alt="${nctProduct.nctProductName}">
                                                        </div>
                                                    </div>

                                                    <!-- Product Info -->
                                                    <div class="product-info">
                                                        <h1 th:text="${nctProduct.nctProductName}">Product Name</h1>
                                                        <div class="product-status" hidden>
                                                            Tình trạng: <span th:text="${nctProduct.nctStatus}">Status</span>
                                                        </div>
                                                        <div class="product-price" th:text="|₫ ${#numbers.formatDecimal(nctProduct.nctPrice, 0, 'COMMA', 0, 'POINT')}|">₫ 0</div>
                                                        <div th:if="${nctProduct.nctOriginalPrice != null and nctProduct.nctOriginalPrice > nctProduct.nctPrice}"
                                                             class="product-original-price"
                                                             th:text="|₫ ${#numbers.formatDecimal(nctProduct.nctOriginalPrice, 0, 'COMMA', 0, 'POINT')}|">₫ 0</div>

                                                        <div class="payment-options">
                                                            <h6>Thanh toán</h6>
                                                            <button class="payment-btn">Toàn bộ</button>
                                                            <button class="payment-btn">Cọc một phần</button>
                                                        </div>

                                                        <div class="action-buttons">
                                                            <form th:action="@{/wishlist/add}" method="post">
                                                                <input type="hidden" name="productId" th:value="${nctProduct.nctProductId}" />
                                                                <button type="submit" class="btn-wishlist" title="Thêm vào yêu thích">
                                                                    <i class="far fa-heart"></i>
                                                                </button>
                                                            </form>
                                                            <button class="btn-preorder">Pre-order ngay</button>
                                                        </div>

                                                        <div class="commitments">
                                                            <h6>UMACT.vn cam kết bán hàng</h6>
                                                            <ul>
                                                                <li><i class="fas fa-shipping-fast"></i>Miễn phí giao hàng toàn quốc</li>
                                                                <li><i class="fas fa-shield-alt"></i>Sản phẩm mới nguyên seal 100%</li>
                                                                <li><i class="fas fa-check-circle"></i>Hàng chính hãng 100%</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div th:if="${nctRelatedProducts != null and !nctRelatedProducts.isEmpty()}" class="related-products">
                                                    <h3>Sản phẩm liên quan</h3>
                                                    <div class="product-grid">
                                                        <div th:each="product : ${nctRelatedProducts}" class="product-card">
                                                            <a th:href="@{/products/{id}(id=${product.nctProductId})}" style="text-decoration: none; color: inherit;">
                                                                <div class="product-image">
                                                                    <img th:src="${product.nctImageUrl}"
                                                                         th:alt="${product.nctProductName}"
                                                                         onerror="this.src='https://via.placeholder.com/200x200/f0f0f0/999?text=No+Image'">
                                                                </div>
                                                                <div class="product-info-card">
                                                                    <div class="product-name" th:text="${product.nctProductName}"></div>
                                                                    <div class="product-price-card" th:text="|₫ ${#numbers.formatDecimal(product.nctPrice, 0, 'COMMA', 0, 'POINT')}|"></div>
                                                                </div>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </main>

                                            <script>
                                                function changeMainImage(element) {
                                                    const mainImage = document.getElementById('mainImage');
                                                    const src = element.querySelector('img').src;
                                                    mainImage.src = src;

                                                    document.querySelectorAll('.thumbnail-item').forEach(item => {
                                                        item.classList.remove('active');
                                                    });
                                                    element.classList.add('active');
                                                }
                                            </script>
                                            </body>

                                            </html>